---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "castai_node_template Resource - terraform-provider-castai"
subcategory: ""
description: |-
  CAST AI node template resource to manage node templates
---

# castai_node_template (Resource)

CAST AI node template resource to manage node templates



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the node template.
- `cluster_id` (String) CAST AI cluster id.

### Optional

- `configuration_id` (String) CAST AI node configuration id to be used for node template.
- `constraints` (Block List, Max: 1) (see [below for nested schema](#nestedblock--constraints))
- `custom_instances_enabled` (Boolean) Marks whether custom instances should be used when deciding which parts of inventory are available. Custom instances are only supported in GCP.
- `custom_instances_with_extended_memory_enabled` (Boolean) Marks whether custom instances with extended memory should be used when deciding which parts of inventory are available. Custom instances are only supported in GCP.
- `custom_labels` (Map of String) Custom labels to be added to nodes created from this template.
- `custom_taints` (Block List) Custom taints to be added to the nodes created from this template. `shouldTaint` has to be `true` in order to create/update the node template with custom taints. If `shouldTaint` is `true`, but no custom taints are provided, the nodes will be tainted with the default node template taint. (see [below for nested schema](#nestedblock--custom_taints))
- `is_default` (Boolean) Flag whether the node template is default.
- `is_enabled` (Boolean) Flag whether the node template is enabled and considered for autoscaling.
- `rebalancing_config_min_nodes` (Number) Minimum nodes that will be kept when rebalancing nodes using this node template.
- `should_taint` (Boolean) Marks whether the templated nodes will have a taint.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--constraints"></a>
### Nested Schema for `constraints`

Optional:

- `architectures` (List of String) List of acceptable instance CPU architectures, the default is amd64. Allowed values: amd64, arm64.
- `azs` (List of String) The list of AZ names to consider for the node template, if empty or not set all AZs are considered.
- `burstable_instances` (String) Will only include burstable instances when enabled otherwise they will be excluded. Supported values: `enabled`, `disabled` or ``.
- `compute_optimized` (Boolean) Compute optimized instance constraint (deprecated).
- `compute_optimized_state` (String) Will only include compute optimized nodes when enabled and exclude compute optimized nodes when disabled. Empty value won't have effect on instances filter. Supported values: `enabled`, `disabled` or empty string.
- `custom_priority` (Block List) (see [below for nested schema](#nestedblock--constraints--custom_priority))
- `dedicated_node_affinity` (Block List) Dedicated node affinity - creates preference for instances to be created on sole tenancy or dedicated nodes. This
 feature is only available for GCP clusters and sole tenancy nodes with local
 SSDs or GPUs are not supported. If the sole tenancy or dedicated nodes don't have capacity for selected instance
 type, the Autoscaler will fall back to multi-tenant instance types available for this Node Template.
 Other instance constraints are applied when the Autoscaler picks available instance types that can be created on
 the sole tenancy or dedicated node (example: setting min CPU to 16). (see [below for nested schema](#nestedblock--constraints--dedicated_node_affinity))
- `enable_spot_diversity` (Boolean) Enable/disable spot diversity policy. When enabled, autoscaler will try to balance between diverse and cost optimal instance types.
- `fallback_restore_rate_seconds` (Number) Fallback restore rate in seconds: defines how much time should pass before spot fallback should be attempted to be restored to real spot.
- `gpu` (Block List, Max: 1) (see [below for nested schema](#nestedblock--constraints--gpu))
- `instance_families` (Block List, Max: 1) (see [below for nested schema](#nestedblock--constraints--instance_families))
- `is_gpu_only` (Boolean) GPU instance constraint - will only pick nodes with GPU if true
- `max_cpu` (Number) Max CPU cores per node.
- `max_memory` (Number) Max Memory (Mib) per node.
- `min_cpu` (Number) Min CPU cores per node.
- `min_memory` (Number) Min Memory (Mib) per node.
- `on_demand` (Boolean) Should include on-demand instances in the considered pool.
- `os` (List of String) List of acceptable instance Operating Systems, the default is linux. Allowed values: linux, windows.
- `spot` (Boolean) Should include spot instances in the considered pool.
- `spot_diversity_price_increase_limit_percent` (Number) Allowed node configuration price increase when diversifying instance types. E.g. if the value is 10%, then the overall price of diversified instance types can be 10% higher than the price of the optimal configuration.
- `spot_interruption_predictions_enabled` (Boolean) Enable/disable spot interruption predictions.
- `spot_interruption_predictions_type` (String) Spot interruption predictions type. Can be either "aws-rebalance-recommendations" or "interruption-predictions".
- `storage_optimized` (Boolean) Storage optimized instance constraint (deprecated).
- `storage_optimized_state` (String) Storage optimized instance constraint - will only pick storage optimized nodes if enabled and won't pick if disabled. Empty value will have no effect. Supported values: `enabled`, `disabled` or empty string.
- `use_spot_fallbacks` (Boolean) Spot instance fallback constraint - when true, on-demand instances will be created, when spots are unavailable.

<a id="nestedblock--constraints--custom_priority"></a>
### Nested Schema for `constraints.custom_priority`

Optional:

- `instance_families` (List of String) Instance families to prioritize in this tier.
- `on_demand` (Boolean) If true, this tier will apply to on-demand instances.
- `spot` (Boolean) If true, this tier will apply to spot instances.


<a id="nestedblock--constraints--dedicated_node_affinity"></a>
### Nested Schema for `constraints.dedicated_node_affinity`

Required:

- `az_name` (String) Availability zone name.
- `instance_types` (List of String) Instance/node types in this node group.
- `name` (String) Name of node group.

Optional:

- `affinity` (Block List) (see [below for nested schema](#nestedblock--constraints--dedicated_node_affinity--affinity))

<a id="nestedblock--constraints--dedicated_node_affinity--affinity"></a>
### Nested Schema for `constraints.dedicated_node_affinity.affinity`

Required:

- `key` (String) Key of the node affinity selector.
- `operator` (String) Operator of the node affinity selector. Allowed values: In, NotIn, Exists, DoesNotExist, Gt, Lt.
- `values` (List of String) Values of the node affinity selector.



<a id="nestedblock--constraints--gpu"></a>
### Nested Schema for `constraints.gpu`

Optional:

- `exclude_names` (List of String) Names of the GPUs to exclude.
- `include_names` (List of String) Instance families to include when filtering (excludes all other families).
- `manufacturers` (List of String) Manufacturers of the gpus to select - NVIDIA, AMD.
- `max_count` (Number) Max GPU count for the instance type to have.
- `min_count` (Number) Min GPU count for the instance type to have.


<a id="nestedblock--constraints--instance_families"></a>
### Nested Schema for `constraints.instance_families`

Optional:

- `exclude` (List of String) Instance families to include when filtering (excludes all other families).
- `include` (List of String) Instance families to exclude when filtering (includes all other families).



<a id="nestedblock--custom_taints"></a>
### Nested Schema for `custom_taints`

Required:

- `key` (String) Key of a taint to be added to nodes created from this template.

Optional:

- `effect` (String) Effect of a taint to be added to nodes created from this template, the default is NoSchedule. Allowed values: NoSchedule, NoExecute.
- `value` (String) Value of a taint to be added to nodes created from this template.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `read` (String)
- `update` (String)

## Import

Import is supported using the following syntax:

```shell
# Import node template by specifying cluster ID and node template name.
terraform import castai_node_template.default_by_castai 105e6fa3-20b1-424e-v589-9a64d1eeabea/default-by-castai
```
