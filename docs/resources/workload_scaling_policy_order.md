---
page_title: "castai_workload_scaling_policy_order Resource - terraform-provider-castai"
subcategory: ""
description: |-
  
---

# castai_workload_scaling_policy_order (Resource)


Policy priority determines which policy a workload is assigned to when multiple policies have assignment rules that
could match the same workload.

Policies higher in the list have higher priority and will be evaluated first when determining
workload assignments. This allows you to create a hierarchy where more specific policies take precedence over general
ones.

> [!NOTE]
> This change is propagated asynchronously, so it may take some time to be reflected in the system. Workloads will be
gradually reassigned to the newly ordered matching policy.

## Example Usage

```terraform
data "castai_workload_scaling_policy_order" "cluster" {
  cluster_id = castai_gke_cluster.cluster.id
}

locals {
  ordered_policy_ids = [
    "be61e44b-0f7c-44da-b60e-0594d6fd3634",
    "f60b79f0-d21e-4eda-a59f-f5daa846d289",
  ]
  unordered_policy_ids = tolist(setsubtract(data.castai_workload_scaling_policy_order.cluster.policy_ids, local.ordered_policy_ids))
}

resource "castai_workload_scaling_policy_order" "custom" {
  cluster_id = castai_gke_cluster.cluster.id
  policy_ids = concat(local.ordered_policy_ids, sort(local.unordered_policy_ids))
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster_id` (String) CAST AI cluster id
- `policy_ids` (List of String) List of scaling policy IDs in the order they should be applied.

### Optional

- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `update` (String)

## Importing

For each connected cluster, there is a list of default scaling policy. An existing scaling policy order can be imported into the
Terraform state using the [`import`](https://developer.hashicorp.com/terraform/language/import#syntax) block (recommended for Terraform 1.5.0+).

1. Create an `import.tf` file with the following content:

   ```tf
   import {
    to = castai_workload_scaling_policy_order.custom
    id = var.castai_gke_cluster_id
   }
   ```

2. Run the `terraform import` command:

   ```shell
   terraform plan -out=import.plan -var-file=tf.vars -generate-config-out=generated.tf
   ```

3. Review the `generated.tf` file and ensure the order you are interested in.

4. Apply the import plan:

   ```shell
   terraform apply "import.plan"
   ```
